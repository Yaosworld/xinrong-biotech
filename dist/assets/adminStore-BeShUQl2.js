import{B as p,l as i}from"./index-1ucue018.js";const y=p("admin",()=>{const e=i([]),n=i(0),l=i(!1),o=i(null),a=i(null);function u(t){const g={...t,id:Date.now().toString(),timestamp:new Date().toISOString()};e.value.unshift(g),e.value.length>50&&(e.value=e.value.slice(0,50)),r()}function c(){try{const t=localStorage.getItem("admin_activities");t&&(e.value=JSON.parse(t))}catch(t){console.error("加载活动记录失败:",t)}}function r(){try{localStorage.setItem("admin_activities",JSON.stringify(e.value))}catch(t){console.error("保存活动记录失败:",t)}}function s(){e.value=[],localStorage.removeItem("admin_activities")}function v(t){n.value=t,l.value=t>0&&t<100}function f(){n.value=0,l.value=!1}function d(t){o.value=t,t&&setTimeout(()=>{o.value===t&&(o.value=null)},5e3)}function S(t){a.value=t,t&&setTimeout(()=>{a.value===t&&(a.value=null)},3e3)}function m(){c()}return{activities:e,uploadProgress:n,isUploading:l,error:o,success:a,addActivity:u,loadActivitiesFromStorage:c,clearActivities:s,setUploadProgress:v,resetUploadState:f,setError:d,setSuccess:S,init:m}});export{y as u};
