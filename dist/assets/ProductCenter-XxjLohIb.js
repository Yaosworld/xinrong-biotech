import{d as Q,l as h,c as _,o as U,m as Z,n as G,a as i,b as r,e,p as H,v as J,q as O,f as C,u as o,i as I,t as v,s as y,F as w,r as B,h as F,w as $,x as S,j as W,k as n}from"./index-1ucue018.js";import{u as X,a as Y}from"./categoryStore-BJl6FMZY.js";import{u as ee}from"./usePagination-CflrPyUS.js";import{S as te}from"./ShowcaseBanner-C2jSaiFe.js";import{_ as se}from"./ProductCard.vue_vue_type_script_setup_true_lang-MEXvmGQs.js";import{_ as ae}from"./LoadingSpinner.vue_vue_type_script_setup_true_lang-CcVPsSWX.js";import{_ as oe}from"./EmptyState.vue_vue_type_script_setup_true_lang-N8raxmla.js";const le={class:"product-center pt-[72px]"},ne={class:"py-8 -mt-6 relative z-10"},re={class:"container-base"},ie={class:"search-box max-w-3xl mx-auto"},ce={class:"pb-6"},ue={class:"container-base"},de={class:"filter-section"},pe={class:"mb-6"},me={class:"filter-header"},ve={class:"filter-tags"},ge=["onClick"],fe={class:"filter-header"},he={class:"filter-tags"},_e=["onClick"],ye={class:"products-section pb-16"},be={class:"container-base"},xe={class:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6"},ke={class:"text-primary-600 font-medium"},Ce={class:"flex items-center gap-4"},we={key:0,class:"py-20"},Be={key:2,class:"products-grid"},Se={key:3,class:"pagination-wrapper"},Pe={class:"text-dark-500 text-sm"},Te=Q({__name:"ProductCenter",setup(ze){const u=Z(),q=W(),s=X(),b=Y(),x=h(""),d=h(""),g=h(!1),f=h(!1),{currentPageItems:P,paginationInfo:p,goToPage:m,setPageSize:V}=ee(_(()=>s.sortedProducts),{initialPageSize:12,scrollTarget:".products-section"}),A=_(()=>{const a=s.allBrands;return g.value?a:a.slice(0,8)}),N=_(()=>{const a=b.categories;return f.value?a:a.slice(0,10)}),T=["精选优质产品","助力科研创新"],j=_(()=>[{key:"products",number:`${s.products.length}+`,label:"产品种类"},{key:"brands",number:`${s.allBrands.length}+`,label:"合作品牌"},{key:"customers",number:"1000+",label:"服务客户"}]),k=()=>{s.setFilter("search",d.value.trim()),x.value=d.value.trim(),m(1)},D=a=>{const t=s.filters.brand;s.setFilter("brand",t===a?"":a),m(1)},K=a=>{const t=s.filters.categoryId;s.setFilter("categoryId",t===a?"":a),m(1)},M=()=>{s.clearAllFilters(),d.value="",x.value="",m(1)},R=a=>{s.setSortBy(a),m(1)};return U(async()=>{await Promise.all([s.loadProducts(),b.loadCategories()]),u.query.category&&s.setFilter("categoryId",u.query.category),u.query.brand&&s.setFilter("brand",u.query.brand),u.query.search&&(d.value=u.query.search,k())}),G(()=>s.filters,a=>{const t={};a.categoryId&&(t.category=a.categoryId),a.brand&&(t.brand=a.brand),a.search&&(t.search=a.search),q.replace({query:t})},{deep:!0}),(a,t)=>{const c=S("el-option"),z=S("el-select"),E=S("el-pagination");return n(),i("div",le,[r(te,{slogans:T,stats:j.value},null,8,["stats"]),e("section",ne,[e("div",re,[e("div",ie,[t[3]||(t[3]=e("i",{class:"fas fa-search text-dark-400 ml-4"},null,-1)),H(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>d.value=l),type:"text",placeholder:"搜索产品名称、品牌、货号...",class:"search-input",onKeyup:O(k,["enter"])},null,544),[[J,d.value]]),e("button",{class:"search-btn",onClick:k}," 搜索 ")])])]),e("section",ce,[e("div",ue,[e("div",de,[e("div",pe,[e("div",me,[t[4]||(t[4]=e("div",{class:"filter-title"},[e("i",{class:"fas fa-award text-primary-500"}),e("span",null,"合作品牌")],-1)),o(s).allBrands.length>8?(n(),i("button",{key:0,class:"filter-more-btn",onClick:t[1]||(t[1]=l=>g.value=!g.value)},[I(v(g.value?"收起":"更多")+" ",1),e("i",{class:y(g.value?"fas fa-chevron-up":"fas fa-chevron-down")},null,2)])):C("",!0)]),e("div",ve,[(n(!0),i(w,null,B(A.value,l=>(n(),i("button",{key:l,class:y(["filter-tag",{active:o(s).filters.brand===l}]),onClick:L=>D(l)},v(l),11,ge))),128))])]),e("div",null,[e("div",fe,[t[5]||(t[5]=e("div",{class:"filter-title"},[e("i",{class:"fas fa-folder text-primary-500"}),e("span",null,"产品分类")],-1)),o(b).categories.length>10?(n(),i("button",{key:0,class:"filter-more-btn",onClick:t[2]||(t[2]=l=>f.value=!f.value)},[I(v(f.value?"收起":"更多")+" ",1),e("i",{class:y(f.value?"fas fa-chevron-up":"fas fa-chevron-down")},null,2)])):C("",!0)]),e("div",he,[(n(!0),i(w,null,B(N.value,l=>(n(),i("button",{key:l.id,class:y(["filter-tag",{active:o(s).filters.categoryId===l.id}]),onClick:L=>K(l.id)},v(l.name),11,_e))),128))])])])])]),e("section",ye,[e("div",be,[e("div",xe,[e("div",ke," 共找到 "+v(o(s).sortedProducts.length)+" 个产品 ",1),e("div",Ce,[t[6]||(t[6]=e("span",{class:"text-dark-500 text-sm"},"排序：",-1)),r(z,{"model-value":o(s).sortBy,size:"default",style:{width:"140px"},onChange:R},{default:$(()=>[r(c,{value:"name-asc",label:"默认排序"}),r(c,{value:"name-desc",label:"名称 Z-A"}),r(c,{value:"price-asc",label:"价格从低到高"}),r(c,{value:"price-desc",label:"价格从高到低"})]),_:1},8,["model-value"])])]),o(s).loading?(n(),i("div",we,[r(ae,{size:"lg",text:"加载产品中..."})])):o(P).length===0?(n(),F(oe,{key:1,icon:"fas fa-box-open",title:"暂无匹配的产品",description:"尝试调整筛选条件或搜索关键词","action-text":"清空筛选",onAction:M})):(n(),i("div",Be,[(n(!0),i(w,null,B(o(P),l=>(n(),F(se,{key:l.id,product:l,"highlight-keyword":x.value},null,8,["product","highlight-keyword"]))),128))])),o(p).totalPages>1?(n(),i("div",Se,[e("span",Pe,"共 "+v(o(p).totalItems)+" 条",1),r(z,{"model-value":o(p).pageSize,size:"default",style:{width:"110px"},onChange:o(V)},{default:$(()=>[r(c,{value:12,label:"12条/页"}),r(c,{value:24,label:"24条/页"}),r(c,{value:48,label:"48条/页"})]),_:1},8,["model-value","onChange"]),r(E,{"current-page":o(p).currentPage,"page-size":o(p).pageSize,total:o(p).totalItems,"pager-count":7,layout:"prev, pager, next, jumper",onCurrentChange:o(m)},null,8,["current-page","page-size","total","onCurrentChange"])])):C("",!0)])])])}}});export{Te as default};
