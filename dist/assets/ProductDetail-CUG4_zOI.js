import{d as B,c as i,m as S,l as j,o as N,a as r,u as y,b as x,e,i as v,F as b,f as l,w as h,x as V,j as $,t as o,g as F,r as E,h as L,k as a}from"./index-1ucue018.js";import{u as D,a as M}from"./categoryStore-BJl6FMZY.js";import{_ as R}from"./LoadingSpinner.vue_vue_type_script_setup_true_lang-CcVPsSWX.js";import{_ as q}from"./ProductCard.vue_vue_type_script_setup_true_lang-MEXvmGQs.js";const z={class:"product-detail pt-20"},O={key:0,class:"min-h-screen flex items-center justify-center"},T={key:1,class:"min-h-screen flex items-center justify-center"},A={class:"bg-dark-50 py-4"},G={class:"container-base"},H={class:"flex items-center text-sm text-dark-500"},J={key:1,class:"fas fa-chevron-right mx-2 text-xs"},K={class:"text-dark-800 font-medium"},Q={class:"py-12"},U={class:"container-base"},W={class:"grid grid-cols-1 lg:grid-cols-2 gap-12"},X={class:"space-y-4"},Y={class:"aspect-square bg-dark-100 rounded-2xl overflow-hidden relative"},Z=["src","alt"],tt={key:1,class:"w-full h-full flex items-center justify-center"},et={key:2,class:"absolute top-4 left-4 px-3 py-2 bg-red-500 text-white font-bold rounded-lg"},st={key:0,class:"text-primary-600 font-medium mb-2"},at={class:"text-3xl font-bold text-dark-900 mb-4"},rt={key:1,class:"mb-6"},ot={class:"inline-flex items-center px-3 py-1 bg-dark-100 text-dark-600 rounded-full text-sm"},lt={key:2,class:"mb-6"},nt={class:"flex items-baseline gap-4"},it={key:0,class:"text-4xl font-bold text-primary-600"},dt={key:1,class:"text-xl text-dark-400 line-through"},ut={class:"mb-8"},ct={class:"bg-dark-50 rounded-xl p-4"},vt={class:"text-dark-600 leading-relaxed"},mt={key:3,class:"mb-6"},xt={class:"text-sm font-mono text-dark-700"},ft={key:4,class:"mb-6"},pt={class:"text-sm text-dark-700"},gt={class:"mb-8"},_t={class:"text-dark-600 leading-relaxed"},kt={key:0,class:"py-12 bg-dark-50"},yt={class:"container-base"},bt={class:"products-grid"},Bt=B({__name:"ProductDetail",setup(ht){const P=S(),f=$(),u=D(),m=M(),C=i(()=>P.params.id),p=j(!1),s=i(()=>u.getProductById(C.value)),n=i(()=>s.value?m.getCategoryById(s.value.categoryId):null),I=i(()=>s.value?m.getCategoryImagePath(s.value.categoryId):"/images/common/placeholder.png"),g=i(()=>s.value?u.getProductsByCategoryId(s.value.categoryId).filter(d=>{var t;return d.id!==((t=s.value)==null?void 0:t.id)}).slice(0,4):[]),_=i(()=>{var d,t;return!((d=s.value)!=null&&d.originalPrice)||!((t=s.value)!=null&&t.currentPrice)?0:Math.round((1-s.value.currentPrice/s.value.originalPrice)*100)}),w=()=>{f.push("/products")};return N(async()=>{await Promise.all([u.loadProducts(),m.loadCategories()])}),(d,t)=>{const k=V("router-link");return a(),r("div",z,[y(u).loading?(a(),r("div",O,[x(R,{size:"lg",text:"加载产品详情..."})])):s.value?(a(),r(b,{key:2},[e("div",A,[e("div",G,[e("nav",H,[x(k,{to:"/",class:"hover:text-primary-600"},{default:h(()=>[...t[6]||(t[6]=[v("首页",-1)])]),_:1}),t[8]||(t[8]=e("i",{class:"fas fa-chevron-right mx-2 text-xs"},null,-1)),x(k,{to:"/products",class:"hover:text-primary-600"},{default:h(()=>[...t[7]||(t[7]=[v("产品中心",-1)])]),_:1}),t[9]||(t[9]=e("i",{class:"fas fa-chevron-right mx-2 text-xs"},null,-1)),n.value?(a(),r("span",{key:0,class:"hover:text-primary-600 cursor-pointer",onClick:t[0]||(t[0]=c=>y(f).push(`/products?category=${n.value.id}`))},o(n.value.name),1)):l("",!0),n.value?(a(),r("i",J)):l("",!0),e("span",K,o(s.value.name),1)])])]),e("section",Q,[e("div",U,[e("div",W,[e("div",X,[e("div",Y,[p.value?(a(),r("div",tt,[...t[10]||(t[10]=[e("i",{class:"fas fa-image text-6xl text-dark-300"},null,-1)])])):(a(),r("img",{key:0,src:I.value,alt:s.value.name,class:"w-full h-full object-cover",onError:t[1]||(t[1]=c=>p.value=!0)},null,40,Z)),_.value>0?(a(),r("div",et," -"+o(_.value)+"% OFF ",1)):l("",!0)])]),e("div",null,[s.value.brand?(a(),r("div",st,o(s.value.brand),1)):l("",!0),e("h1",at,o(s.value.name),1),n.value?(a(),r("div",rt,[e("span",ot,[t[11]||(t[11]=e("i",{class:"fas fa-tag mr-2"},null,-1)),v(" "+o(n.value.name),1)])])):l("",!0),s.value.currentPrice||s.value.originalPrice?(a(),r("div",lt,[e("div",nt,[s.value.currentPrice?(a(),r("span",it," ¥"+o(s.value.currentPrice.toLocaleString()),1)):l("",!0),s.value.originalPrice&&s.value.currentPrice&&s.value.currentPrice<s.value.originalPrice?(a(),r("span",dt," ¥"+o(s.value.originalPrice.toLocaleString()),1)):l("",!0)])])):l("",!0),e("div",ut,[t[12]||(t[12]=e("h3",{class:"text-lg font-semibold text-dark-800 mb-3"},"规格参数",-1)),e("div",ct,[e("p",vt,o(s.value.specs),1)])]),s.value.sku?(a(),r("div",mt,[t[13]||(t[13]=e("span",{class:"text-sm text-dark-500"},"产品编码：",-1)),e("span",xt,o(s.value.sku),1)])):l("",!0),s.value.unit?(a(),r("div",ft,[t[14]||(t[14]=e("span",{class:"text-sm text-dark-500"},"销售单位：",-1)),e("span",pt,o(s.value.unit),1)])):l("",!0),e("div",gt,[t[15]||(t[15]=e("h3",{class:"text-lg font-semibold text-dark-800 mb-3"},"产品描述",-1)),e("p",_t,o(s.value.desc),1)]),t[16]||(t[16]=F('<div class="flex gap-4"><button class="btn-primary flex-1"><i class="fas fa-phone-alt mr-2"></i> 咨询订购 </button><button class="btn-secondary"><i class="fas fa-heart"></i></button></div>',1))])])])]),g.value.length>0?(a(),r("section",kt,[e("div",yt,[t[17]||(t[17]=e("h2",{class:"text-2xl font-bold text-dark-900 mb-8"},"相关产品",-1)),e("div",bt,[(a(!0),r(b,null,E(g.value,c=>(a(),L(q,{key:c.id,product:c},null,8,["product"]))),128))])])])):l("",!0)],64)):(a(),r("div",T,[e("div",{class:"text-center"},[t[3]||(t[3]=e("i",{class:"fas fa-box-open text-6xl text-dark-300 mb-6"},null,-1)),t[4]||(t[4]=e("h2",{class:"text-2xl font-bold text-dark-700 mb-4"},"产品未找到",-1)),t[5]||(t[5]=e("p",{class:"text-dark-500 mb-6"},"抱歉，您查找的产品不存在或已下架",-1)),e("button",{class:"btn-primary",onClick:w},[...t[2]||(t[2]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),v(" 返回产品列表 ",-1)])])])]))])}}});export{Bt as default};
