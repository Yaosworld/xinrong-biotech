import{d as P,c as d,m as j,l as B,o as N,a as r,u as S,b as D,e,i as u,F as m,f as n,s as b,t as l,r as y,h as L,j as V,k as a}from"./index-1ucue018.js";import{u as z}from"./promotionStore-n-Jp5O7V.js";import{_ as E}from"./LoadingSpinner.vue_vue_type_script_setup_true_lang-CcVPsSWX.js";import{_ as $}from"./NewsCard.vue_vue_type_script_setup_true_lang-BcCAsn9K.js";const F={class:"promotion-detail pt-20"},I={key:0,class:"min-h-screen flex items-center justify-center"},M={key:1,class:"min-h-screen flex items-center justify-center"},R={class:"relative h-64 md:h-96 bg-dark-900 overflow-hidden"},T=["src","alt"],q={key:1,class:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary-600 to-tech-600"},A={class:"py-12"},G={class:"container-base"},H={class:"max-w-3xl mx-auto"},J={key:0,class:"flex items-center text-dark-500 mb-4"},K={class:"text-3xl md:text-4xl font-bold text-dark-900 mb-6"},O={class:"text-xl text-dark-600 mb-8 leading-relaxed"},Q={key:1,class:"bg-primary-50 rounded-2xl p-6 mb-8"},U={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},W={class:"flex items-baseline gap-4"},X={key:0,class:"text-4xl font-bold text-primary-600"},Y={key:1,class:"text-xl text-dark-400 line-through"},Z={key:0,class:"text-right"},ee={class:"inline-flex items-center px-4 py-2 bg-red-500 text-white font-bold rounded-lg"},te={key:2,class:"prose prose-lg max-w-none mb-8"},se={class:"text-dark-600 leading-relaxed whitespace-pre-wrap"},ae={key:3,class:"bg-dark-50 rounded-xl p-6 mb-8"},re={class:"text-dark-600"},le={key:4,class:"mb-8"},oe={class:"flex flex-wrap gap-2"},ne={key:0,class:"py-12 bg-dark-50"},ie={class:"container-base"},de={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},fe=P({__name:"PromotionDetail",setup(ue){const k=j(),h=V(),c=z(),w=d(()=>Number(k.params.id)),p=B(!1),t=d(()=>c.getPromotionById(w.value)),x=d(()=>t.value?c.sortedPromotions.filter(o=>{var s;return o.id!==((s=t.value)==null?void 0:s.id)}).slice(0,3):[]),C=d(()=>{var o;switch((o=t.value)==null?void 0:o.status){case"active":return"bg-green-100 text-green-700";case"coming":return"bg-yellow-100 text-yellow-700";case"ended":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}}),f=o=>new Date(o).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}),v=d(()=>{var o,s;return!((o=t.value)!=null&&o.original_price)||!((s=t.value)!=null&&s.current_price)?0:Math.round((1-t.value.current_price/t.value.original_price)*100)}),_=()=>{h.push("/news")};return N(async()=>{await c.loadPromotions()}),(o,s)=>{var g;return a(),r("div",F,[S(c).loading?(a(),r("div",I,[D(E,{size:"lg",text:"加载活动详情..."})])):t.value?(a(),r(m,{key:2},[e("section",R,[!p.value&&t.value.image_url?(a(),r("img",{key:0,src:t.value.image_url,alt:t.value.title,class:"w-full h-full object-cover opacity-50",onError:s[0]||(s[0]=i=>p.value=!0)},null,40,T)):(a(),r("div",q,[e("i",{class:b([t.value.icon_class||"fas fa-bullhorn","text-8xl text-white/30"])},null,2)])),e("div",{class:b(["absolute top-6 right-6 px-4 py-2 rounded-full font-medium",C.value])},l(t.value.statusText),3)]),e("section",A,[e("div",G,[e("div",H,[t.value.start_date&&t.value.end_date?(a(),r("div",J,[s[5]||(s[5]=e("i",{class:"fas fa-calendar-alt mr-2"},null,-1)),e("span",null,l(f(t.value.start_date))+" - "+l(f(t.value.end_date)),1)])):n("",!0),e("h1",K,l(t.value.title),1),e("p",O,l(t.value.summary),1),t.value.current_price||t.value.original_price?(a(),r("div",Q,[e("div",U,[e("div",null,[s[6]||(s[6]=e("div",{class:"text-sm text-dark-500 mb-2"},"活动价格",-1)),e("div",W,[t.value.current_price?(a(),r("span",X," ¥"+l(t.value.current_price.toLocaleString()),1)):n("",!0),t.value.original_price&&t.value.current_price&&t.value.current_price<t.value.original_price?(a(),r("span",Y," ¥"+l(t.value.original_price.toLocaleString()),1)):n("",!0)])]),v.value>0?(a(),r("div",Z,[e("div",ee,[s[7]||(s[7]=e("i",{class:"fas fa-fire mr-2"},null,-1)),u(" 立省 "+l(v.value)+"% ",1)])])):n("",!0)])])):n("",!0),t.value.description?(a(),r("div",te,[s[8]||(s[8]=e("h2",{class:"text-2xl font-bold text-dark-900 mb-4"},"活动详情",-1)),e("p",se,l(t.value.description),1)])):n("",!0),t.value.applicable_products?(a(),r("div",ae,[s[9]||(s[9]=e("h3",{class:"font-semibold text-dark-800 mb-2"},[e("i",{class:"fas fa-box mr-2"}),u(" 适用产品 ")],-1)),e("p",re,l(t.value.applicable_products),1)])):n("",!0),(g=t.value.tags)!=null&&g.length?(a(),r("div",le,[e("div",oe,[(a(!0),r(m,null,y(t.value.tags,i=>(a(),r("span",{key:i,class:"px-3 py-1 bg-dark-100 text-dark-600 rounded-full text-sm"}," #"+l(i),1))),128))])])):n("",!0),e("div",{class:"flex gap-4"},[s[11]||(s[11]=e("button",{class:"btn-primary flex-1"},[e("i",{class:"fas fa-phone-alt mr-2"}),u(" 立即咨询 ")],-1)),e("button",{class:"btn-secondary",onClick:_},[...s[10]||(s[10]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),u(" 返回列表 ",-1)])])])])])]),x.value.length>0?(a(),r("section",ne,[e("div",ie,[s[12]||(s[12]=e("h2",{class:"text-2xl font-bold text-dark-900 mb-8"},"更多活动",-1)),e("div",de,[(a(!0),r(m,null,y(x.value,i=>(a(),L($,{key:i.id,promotion:i},null,8,["promotion"]))),128))])])])):n("",!0)],64)):(a(),r("div",M,[e("div",{class:"text-center"},[s[2]||(s[2]=e("i",{class:"fas fa-bullhorn text-6xl text-dark-300 mb-6"},null,-1)),s[3]||(s[3]=e("h2",{class:"text-2xl font-bold text-dark-700 mb-4"},"活动未找到",-1)),s[4]||(s[4]=e("p",{class:"text-dark-500 mb-6"},"抱歉，您查找的活动不存在或已下架",-1)),e("button",{class:"btn-primary",onClick:_},[...s[1]||(s[1]=[e("i",{class:"fas fa-arrow-left mr-2"},null,-1),u(" 返回资讯中心 ",-1)])])])]))])}}});export{fe as default};
