import{d as b,l as w,c as k,a as n,e,f as m,s as v,i as $,t as u,F as D,r as T,j as C,k as r}from"./index-1ucue018.js";const L={class:"news-card-image"},S=["src","alt"],j={key:1,class:"w-full h-full bg-gradient-card flex items-center justify-center"},E={class:"absolute top-3 left-3 flex flex-col gap-2"},M={key:0,class:"status-badge status-badge-top"},N={key:1,class:"status-badge status-badge-hot"},_={key:2,class:"absolute top-3 right-3"},H={class:"news-card-content"},z={class:"flex items-center justify-end text-sm text-dark-400 mb-2"},B=["innerHTML"],F=["innerHTML"],K={class:"flex flex-wrap gap-2 mb-4"},R={class:"flex items-center justify-end text-sm"},V={class:"text-primary-600"},q=b({__name:"NewsCard",props:{promotion:{},highlightKeyword:{default:""}},setup(t){const l=t,f=C(),g=w(!1),h=a=>{if(!l.highlightKeyword||!a)return a;const s=l.highlightKeyword.trim().split(/\s+/).filter(i=>i.length>0).map(i=>i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"));if(s.length===0)return a;let o=a;return s.forEach(i=>{const c=new RegExp(`(${i})`,"gi");o=o.replace(c,'<mark class="search-highlight">$1</mark>')}),o},p=a=>new Date(a).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}).replace(/\//g,"-"),x=(a,s)=>{const o=new Date(a),i=new Date(s),c=d=>`${d.getFullYear()}.${String(d.getMonth()+1).padStart(2,"0")}.${String(d.getDate()).padStart(2,"0")}`;return`${c(o)} - ${c(i)}`};k(()=>{switch(l.promotion.status){case"active":return"status-badge-active";case"coming":return"status-badge-coming";case"ended":return"status-badge-ended";default:return""}});const y=()=>{f.push(`/news/promotion/${l.promotion.id}`)};return(a,s)=>(r(),n("article",{class:"news-card-horizontal cursor-pointer",onClick:y},[e("div",L,[!g.value&&t.promotion.image_url?(r(),n("img",{key:0,src:t.promotion.image_url,alt:t.promotion.title,class:"w-full h-full object-cover",onError:s[0]||(s[0]=o=>g.value=!0)},null,40,S)):(r(),n("div",j,[e("i",{class:v([t.promotion.icon_class||"fas fa-bullhorn","text-4xl text-primary-300"])},null,2)])),e("div",E,[t.promotion.is_featured?(r(),n("span",M,"置顶")):m("",!0),t.promotion.priority&&t.promotion.priority<=3?(r(),n("span",N,"热门")):m("",!0)]),t.promotion.status==="ended"?(r(),n("div",_,[...s[1]||(s[1]=[e("span",{class:"status-badge status-badge-ended"},"活动已结束",-1)])])):m("",!0)]),e("div",H,[e("div",null,[e("div",z,[s[2]||(s[2]=e("i",{class:"fas fa-calendar-alt mr-1.5"},null,-1)),$(" 发布："+u(t.promotion.start_date?p(t.promotion.start_date):"-"),1)]),e("h3",{class:"text-lg font-semibold text-dark-800 mb-2 line-clamp-1",innerHTML:h(t.promotion.title)},null,8,B),e("p",{class:"text-dark-500 text-sm line-clamp-2 mb-4",innerHTML:h(t.promotion.summary)},null,8,F),e("div",K,[(r(!0),n(D,null,T((t.promotion.tags||[]).slice(0,3),o=>(r(),n("span",{key:o,class:"tag-pill"},u(o),1))),128))])]),e("div",R,[e("span",V," 活动时间："+u(t.promotion.start_date&&t.promotion.end_date?x(t.promotion.start_date,t.promotion.end_date):"-"),1)])])]))}});export{q as _};
